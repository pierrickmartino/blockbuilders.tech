# NFR Assessment – Story 1.1 (2025-10-12)

Assessor: Quinn (QA)  
Scope: Security, Performance, Reliability, Maintainability

| NFR | Status | Notes |
| --- | --- | --- |
| Security | CONCERNS | Envoy/Redis rate limiting mandated in `docs/architecture/security-and-performance.md:11` is not present in the FastAPI stack (`apps/api/blockbuilders_api/dependencies/auth.py:16`); OAuth provider enablement remains incomplete (`docs/stories/1.1.platform-skeleton-authentication.md:112`). |
| Performance | CONCERNS | Target P95 <150 ms (`docs/architecture/security-and-performance.md:24`) lacks instrumentation or load tests; current implementation makes sequential Supabase HTTP calls without caching or latency tracking (`apps/api/blockbuilders_api/services/supabase.py:31`). |
| Reliability | CONCERNS | External Supabase calls have no retry/backoff and bubble raw failures, risking outages (`apps/api/blockbuilders_api/services/supabase.py:36-63`); no health checks or circuit breakers implemented despite observability expectations (`docs/architecture/monitoring-and-observability.md:9`). |
| Maintainability | CONCERNS | Automated tests exist only for consent gating; CI pipeline simulation absent and local pytest execution currently blocked (`docs/stories/1.1.platform-skeleton-authentication.md:173`), leaving structural regressions undetected. |

## Evidence Highlights
- Security controls outlined in architecture doc require rate limiting and OAuth hardening, neither enforced in current API or tests.  
- Supabase service relies on single-shot HTTPX calls with 10 s timeout but no resiliency mechanisms.  
- Monitoring plan expects P95 latency and error rate tracking, yet no metrics emission or dashboards implemented in code.  
- Story completion notes flag outstanding OAuth provider enablement and dependency gaps preventing test execution.

## Quality Score
- Assessed NFRs: 4  
- Findings: 4 × CONCERNS  
- Score: 60 / 100

## Recommendations
1. Add middleware or upstream Envoy configuration to enforce login/consent rate limiting; extend tests to cover throttling paths.  
2. Implement Supabase client retry policy with jitter and instrument request latency to feed Datadog metrics.  
3. Provide health checks for external dependencies and wrap workspace seeding in guarded retries to avoid partial failures.  
4. Unblock CI pipeline (pnpm/pytest installs) and broaden test coverage to OAuth flows, audit logging, and performance smoke checks.
